{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <title>All Exams</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Bootstrap CSS CDN (BOOTSTRAP 5)-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- Favicon icon -->
    <link rel="icon" href="{% static 'assets/img/favicon.png' %}" type="image/x-icon">

    <!-- font css -->
    <link rel="stylesheet" href="{% static 'assets/fonts/feather.css' %}">
    <link rel="stylesheet" href="{% static 'assets/fonts/fontawesome.css' %}">
    <link rel="stylesheet" href="{% static 'assets/fonts/material.css' %}">

    <!-- vendor css -->
    <link rel="stylesheet" href="{% static 'assets/css/dashboard/style.css' %}" id="main-style-link">

    <!-- DATA TABLES -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs5/jszip-2.5.0/dt-1.11.3/b-2.0.1/b-html5-2.0.1/fh-3.2.0/r-2.2.9/sl-1.3.3/datatables.min.css"/>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css">
    <link href="https://cdn.datatables.net/select/1.3.3/css/select.bootstrap5.min.css">
    <link href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap5.min.css">
    <link href="https://cdn.datatables.net/buttons/2.0.1/css/buttons.bootstrap5.min.css">

</head>

<body class="">
    <!-- [ Pre-loader ] start -->
	<div class="loader-bg">
		<div class="loader-track">
			<div class="loader-fill"></div>
		</div>
	</div>
	<!-- [ Pre-loader ] End -->
	<!-- [ Mobile header ] start -->
	<div class="pc-mob-header pc-header">
		<div class="pcm-logo">
			<img src="{% static 'assets/images/logo.png' %}" alt="" class="logo logo-lg">
		</div>
		<div class="pcm-toolbar">
			<a href="#!" class="pc-head-link" id="mobile-collapse">
				<div class="hamburger hamburger--arrowturn">
					<div class="hamburger-box">
						<div class="hamburger-inner"></div>
					</div>
				</div>
			</a>
			<a href="#!" class="pc-head-link" id="header-collapse">
				<i data-feather="more-vertical"></i>
			</a>
		</div>
	</div>
	<!-- [ Mobile header ] End -->

	<!-- [ navigation menu ] start -->
	<nav class="pc-sidebar ">
		<div class="navbar-wrapper">
			<div class="m-header">
				<a href="index.html" class="b-brand">
					<img src="{% static 'assets/img/logotype with favicon.png' %}" alt="" class="logo logo-sm">
				</a>
			</div>
			<div class="navbar-content">    
                <br><br>
				<ul class="pc-navbar">
					<li class="pc-item pc-caption">
						<label>Navigation</label>
					</li>
					<li class="pc-item">
						<a href="../home" class="pc-link "><span class="pc-micon"><i class="material-icons-two-tone">home</i></span><span class="pc-mtext">Home</span></a>
					</li>

					<li class="pc-item">
						<a href="../dashboard" class="pc-link "><span class="pc-micon"><i class="material-icons-two-tone">analytics</i></span><span class="pc-mtext">Dashboard</span></a>
					</li>
					<li class="pc-item pc-caption">
						<label>Enrollee Management</label>
						<span>Enrollee Management Settings</span>
					</li>
					<li class="pc-item">
						<a href="../enrollee-management/regform" class="pc-link "><span class="pc-micon"><i class="material-icons-two-tone">person_add</i></span><span class="pc-mtext">Account Registration</span></a>
					</li>
					<li class="pc-item">
						<a href="../enrollee-management/accounts" class="pc-link "><span class="pc-micon"><i class="material-icons-two-tone">account_tree</i></span><span class="pc-mtext">Manage Accounts</span></a>
					</li>
					<li class="pc-item pc-caption">
						<label>Exam Management</label>
						<span>Exam Management Settings</span>
					</li>
                    <li class="pc-item active">
						<a href="../exam-management/all-exams" class="pc-link "><span class="pc-micon"><i class="material-icons-two-tone">assignment</i></span><span class="pc-mtext">All Exams</span></a>
					</li>
                    <li class="pc-item">
						<a href="../exam-management/create-exam" class="pc-link "><span class="pc-micon"><i class="material-icons-two-tone">post_add</i></span><span class="pc-mtext">Create Exam</span></a>
					</li>
                    
					<!-- <li class="pc-item pc-hasmenu">
						<a href="#!" class="pc-link"><span class="pc-micon"><i class="material-icons-two-tone">https</i></span><span class="pc-mtext">Registration</span><span class="pc-arrow"><i data-feather="chevron-right"></i></span></a>
						<ul class="pc-submenu">
							<li class="pc-item"><a class="pc-link" href="auth-signup.html" target="_blank">Add Enrollee</a></li>
							<li class="pc-item"><a class="pc-link" href="auth-signin.html" target="_blank">Manage Enrollee</a></li>
						</ul>
					</li> -->

				</ul>
			</div>
		</div>
	</nav>
	<!-- [ navigation menu ] end -->

	<!-- [ Header ] start -->
	<header class="pc-header">
		<div class="header-wrapper">
			<div class="ml-auto">
				<ul class="list-unstyled">
					<li class="dropdown pc-h-item">
						<a class="pc-head-link dropdown-toggle arrow-none mr-0" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
							{% for admin in admin_details %}
                            <img src='{{admin.picture.url}}' alt="" class="user-avtar">
                            {% endfor %}
							<span>
								<span class="user-name">{{user.get_full_name}}</span>
								<span class="user-desc">Administrator</span>
							</span>
						</a>
						<div class="dropdown-menu dropdown-menu-right pc-h-dropdown">
                            <a href="../profile" class="dropdown-item">
								<i class="material-icons-two-tone">account_circle</i> <!-- MODAL THIS -->
								<span>Profile</span>
							</a>
							<a href="../logout" class="dropdown-item">
                                <i class="fas fa-sign-out-alt"></i>
								<span>Logout</span>
							</a>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</header>
	<!-- [ Header ] end -->

    <!-- [ Main Content ] start -->
    <div class="pc-container">
        <div class="pcoded-content">
            <!-- [ breadcrumb ] start -->
            <div class="page-header">
                <div class="page-block">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <div class="page-header-title">
                                <h5 class="m-b-10">All Exams</h5>
                            </div>
                            <ul class="breadcrumb">
                                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                                <li class="breadcrumb-item">Account Registration</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- [ breadcrumb ] end -->
            
            <!-- [ Main Content ] start -->
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <h5>All Exams</h5>
                        </div>
                        <div class="card-body">
                            <!-- Message Loader -->
                            {% for message in messages %}
                            <div class="alert {{message.tags}}" role="alert">
                            {{ message }}
                            </div>
                            {% endfor %}

                            <!-- Exam Table -->
                            <table id="allExams" class="table table-striped" style="width:100%;">
                                <thead>
                                    <tr>
                                        <th style="text-align: center;">Exam ID</th>
                                        <th style="text-align: center;">Exam Name</th>
                                        <th style="text-align: center;">Assigned To</th>
                                        <!-- <th style="text-align: center;">Total Items</th> -->
                                        <!-- <th style="text-align: center;">Overall Points</th> -->
                                        <!-- <th style="text-align: center;">Link</th> -->
                                        <th style="text-align: center;">Created by</th>
                                        <th style="text-align: center;">Actions</th>
                                    </tr>
                                </thead>
                                
                                <tbody>
                                    {% for exam in exams %}
                                    <tr style="text-align: center;">
                                        <td>{{exam.exam_id}}</td>
                                        <td>{{exam.title}}</td>
                                        <td>{{exam.takers}}</td>
                                        <!-- <td>{{exam.total_items}}</td> -->
                                        <!-- <td>{{exam.overall_points}}</td> -->

                                    <!-- {% if exam.link != None %}
                                        <td><a href={{exam.link}}>Click here</a></td>
                                    {% else %}
                                        <td>None</td>
                                    {% endif %} -->
                                        <td>{{exam.created_by.user.get_full_name}}</td> 
                                        <td>
                                            <a href="#" data-bs-toggle="modal" data-bs-target="#viewExam-{{exam.exam_id}}">
                                                <i class="material-icons-two-tone" style="background-color:green; padding-bottom: 10px;">view_list</i>
                                            </a>
                                            <a href="#" data-bs-toggle="modal" data-bs-target="#deleteExam-{{exam.exam_id}}">
                                                <i class="material-icons-two-tone" style="background-color: maroon; padding-bottom: 10px;">delete</i>
                                            </a>

                                            <!-- DELETE QUESTION MODAL -->
                                            <form class="row g-3 needs-validation" novalidate method="POST">
                                            {% csrf_token %}
                                                <div class="modal fade" id="deleteExam-{{exam.exam_id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog">
                                                        <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title" id="exampleModalLabel"><b>Confirm Exam Deletion</b></h5>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>

                                                        <div class="modal-body" style="text-align: left;">
                                                            Are you sure you want to delete exam?
                                                            <input type="text" name="exam_to_delete" value={{exam.exam_id}} hidden>
                                                        </div>

                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                            <button type="submit" name="btnDelExam" class="btn btn-secondary" style="background-color: maroon;">Yes</button>
                                                        </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <!-- [ Main Content ] end -->
        </div>
    </div>
</body>

<!-- Scripts  -->
<footer> 
    <!-- Required Js -->
    <script src="{% static 'assets/js/dashboard/vendor-all.min.js' %}"></script>
    <script src="{% static 'assets/js/dashboard/plugins/bootstrap.min.js' %}"></script>
    <script src="{% static 'assets/js/dashboard/plugins/feather.min.js' %}"></script>
    <script src="{% static 'assets/js/dashboard/pcoded.min.js' %}"></script>

    <!-- custom-chart js -->
    <script src="{% static 'assets/js/dashboard/pages/dashboard-sale.js' %}"></script>

    <!-- Bootstrap Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <!-- BOOTSTRAP FORM VALIDATION -->
    <script src="{% static 'assets/js/formvalidation.js' %}"></script>

    <!-- DATATABLE -->
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap5.min.js"></script>

    <!-- JS for Datatables-->
    <script>
        $(document).ready(function() {
            $('#allExams').DataTable();
        } );
    </script>


    </script>
</footer>

</html>
